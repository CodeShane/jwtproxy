#cloud-config
rancher:
  services:
    jwtproxy:
      environment:
       - JWTPROXY_LISTEN_PORT=9090
       - JWTPROXY_REMOTE_URL=http://localhost:8080
       - JWTPROXY_CONFIG=/etc/keys.json
      image: adrianhesketh/jwtproxy
      restart: always
      volumes:
        - /etc/keys.json:/etc/keys.json
      ports:
        - 9090:9090
write_files:
- path: /etc/keys.json
  content: |+
    {
        "example.com": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxFj26fqmulXntc7kCp9t\n
    }
  owner: root
  permissions: "0644"
